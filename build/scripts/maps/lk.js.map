{"version":3,"sources":["lk.js"],"names":["$","document","ready","toggle","formElements","tippy","$section","speed","each","$this","$toggle","find","$content","state","hasClass","initialized","on","check","is","timeout","add","event","TouchHoverEvents","touched","clearTimeout","delay","setTimeout","$target","target","closest","length","addClass","show","removeClass","stop","slideUp","$inputs","querySelectorAll","addEventListener","inputEvents","$element","$parent","parentNode","classList","contains","type","remove","checkInput","$messages","querySelector","value","replace","forEach","$selects","select2","theme","minimumResultsForSearch","Infinity","placeholder","id","text","allowClear","parents","val","attr","group","$targets","self_type","prop","parent","$names","$label","count","files","names","i","file","name","join","after"],"mappings":"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","sourcesContent":["$(document).ready(function() {\n  toggle();\n  formElements();\n\n  if(tippy) tippy('[data-tippy-content]');\n})\n\nfunction toggle() {\n  let $section = $('.toggle-section'),\n      speed = 150;\n\n  $section.each(function() {\n    let $this = $(this),\n        $toggle = $this.find('.toggle-section__trigger'),\n        $content = $this.find('.toggle-section__content'),\n        state = $this.hasClass('active') ? true : false,\n        initialized;\n\n    $toggle.on('click', function() {\n      state = !state ? true : false;\n      check();\n    })\n    \n    if($this.is('[data-hover]')) {\n      let timeout;\n      \n      $toggle.add($content).on('mouseenter', function(event){\n        if(!TouchHoverEvents.touched) {\n          if(timeout) clearTimeout(timeout);\n          state=true;\n          check();\n        }\n      })\n\n      $toggle.add($content).on('mouseleave', function(event){\n        if(!TouchHoverEvents.touched) {\n          let delay;\n          if($(this).is($toggle)) {\n            delay=500;\n          } else {\n            delay=100;\n          }\n          timeout = setTimeout(()=>{\n            state=false;\n            check();\n          }, delay)\n        }\n      })\n\n    }\n\n    if($this.is('[data-out-hide]') || $this.is('[data-hover]')) {\n      $(document).on('click touchstart', function(event) {\n        let $target = $(event.target);\n        if(!$target.closest($content).length && !$target.closest($toggle).length && state) {\n          state=false;\n          check();\n        }\n      })\n    } \n\n    function check() {\n      if(state) {\n        $this.add($content).add($toggle).addClass('active');\n        if($this.is('[data-slide]')) {\n          $content.show(speed);\n        }\n      } \n      else {\n        $this.add($toggle).add($content).removeClass('active');\n        if($this.is('[data-slide]')) {\n          if(initialized) {\n            $content.stop().slideUp(speed);\n          } \n        }\n      }\n    }\n\n    check();\n\n    initialized=true;\n  })\n}\n\nfunction formElements() {\n  let $inputs = document.querySelectorAll('.form-element__input');\n  document.addEventListener('focus',  (event)=>{inputEvents(event)}, true);\n  document.addEventListener('blur',   (event)=>{inputEvents(event)}, true);\n  document.addEventListener('input',   (event)=>{inputEvents(event)}, true);\n  document.addEventListener('change',   (event)=>{inputEvents(event)}, true);\n\n  let inputEvents = (event) => {\n    let $element = event.target,\n        $parent = event.target.parentNode;\n    if($parent && $parent.classList.contains('form-element')) {\n      if(event.type=='focus') {\n        $parent.classList.add('focus');\n      } else if(event.type=='blur') {\n        $parent.classList.remove('focus');\n      } else {\n        checkInput($element);\n        //remove errors\n        if($parent.classList.contains('error')) {\n          $parent.classList.remove('error');\n          let $messages = $parent.querySelector('.errorlist');\n          if($messages) $messages.remove();\n        }\n      }\n    }\n  }\n  let checkInput = ($element) => {\n    let value = $element.value.replace(/^\\s+|\\s+$/g, ''), \n        $parent = $element.parentNode;\n    if(value!=='') {\n      $parent.classList.add('filled');\n    } else {\n      $parent.classList.remove('filled');\n    }\n  }\n  $inputs.forEach(($element)=>{\n    checkInput($element);\n  })\n\n  //selects\n  let $selects = $('.form-element__select');\n  $selects.select2({\n    theme: 'new-select',\n    minimumResultsForSearch: Infinity,\n    placeholder: {\n      id: '', \n      text: ''\n    },\n    allowClear: true\n  });\n  $selects.on('select2:select select2:open select2:close', function(event) { \n    let $this = $(event.target),\n        $parent = $this.parents('.form-element');\n    if(event.type=='select2:open') {\n      $parent.addClass('focus');\n    } \n    else if(event.type=='select2:close') {\n      $parent.removeClass('focus');\n    } \n    else {\n      $parent.addClass('filled');\n      //remove errors\n      if($parent.hasClass('error')) {\n        $parent.removeClass('error');\n        let $messages = $parent.find('.errorlist');\n        if($messages) $messages.remove();\n      }\n    }\n  });\n  $selects.each(function() {\n    let $this = $(this),\n        $parent = $this.parents('.form-element');\n    if($this.val().replace(/^\\s+|\\s+$/g, '')!=='') {\n      $parent.addClass('filled');\n    }\n  });\n\n  //checkboxes \n  $(document).on('change', '[data-checkbox-group]', function(event) {\n    let $target = $(event.target),\n        type = $target.attr('data-checkbox-type'),\n        group = $target.attr('data-checkbox-group'),\n        $targets = $(`[data-checkbox-group='${group}']`);\n\n    if($target.is(':checked')) {\n      $targets.each(function() {\n        let $this = $(this), self_type = $this.attr('data-checkbox-type');\n        if(self_type!==type) {\n          $this.prop('checked', false);\n        }\n      })\n    }\n  })\n\n  //file\n  $(document).on('change', '.form-upload__input', function(event) {\n    let $this = $(this),\n        $parent = $this.parent(),\n        $names = $parent.find('.form-upload__names'),\n        $label = $parent.find('.form-upload__label'),\n        val = $this.val();\n\n    if(val) {\n      let count = $this[0].files.length,\n          names = [], i=0;\n      for(let file of $this[0].files) {\n        names[i] = file.name;\n        i++;\n      }\n      if($names.length) {\n        $names.text(names.join(', '));\n      } else {\n        $label.after(`<span class='form-upload__names'>${names.join(', ')}</span>`);\n      }\n      $label.text(`Загружуено файлов: ${count}`);\n    } else {\n      if($names.length) $names.remove();\n      $label.text('Загрузить файлы');\n    }\n\n  })\n\n}\n"],"file":"../lk.js"}