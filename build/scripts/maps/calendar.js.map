{"version":3,"sources":["calendar.js"],"names":["$","document","ready","setTimeout","calendar","yearDropdownPlugin","pluginConfig","defaultConfig","text","theme","date","Date","yearStart","yearEnd","config","key","undefined","getYear","value","split","parseInt","currYear","getFullYear","selectedYear","yearDropdown","createElement","createSelectElement","year","start","end","i","option","appendChild","fp","yearSelectContainer","_createElement","tabIndex","addEventListener","evt","target","options","selectedIndex","changeYear","append","onReady","name","monthNav","className","yearInputCollection","calendarContainer","getElementsByClassName","el","parentNode","insertBefore","firstChild","$calendar","each","$this","$parent","parents","mode","attr","mvalue","mind","maxd","setFullYear","flatpickr","disableMobile","maxDate","minDate","dateFormat","position","nextArrow","prevArrow","plugins","Math","abs","onOpen","addClass","onClose","removeClass","onYearChange","selectedDates","dateStr","instance","$year","querySelector","currentYear"],"mappings":"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","sourcesContent":["$(document).ready(function() {\n  setTimeout(()=>{\n    calendar();\n  }, 500)\n})\n\nconst yearDropdownPlugin = function (pluginConfig) {\n  var defaultConfig = {\n      text: '',\n      theme: \"light\",\n      date: new Date(),\n      yearStart: 10,\n      yearEnd: 10,\n  };\n\n  var config = {};\n  for (var key in defaultConfig) {\n      config[key] = pluginConfig && pluginConfig[key] !== undefined ? pluginConfig[key] : defaultConfig[key];\n  }\n\n  var getYear = function (value) {\n      var date = value.split(\".\");\n      return parseInt(date[2], 10);\n  }\n\n  var currYear = new Date().getFullYear();\n  var selectedYear = getYear(config.date);\n\n  var yearDropdown = document.createElement(\"select\");\n\n  var createSelectElement = function (year) {\n      var start = new Date().getFullYear() - config.yearStart;\n      var end = currYear + config.yearEnd;\n\n      for (var i = end; i >= start; i--) {\n          var option = document.createElement(\"option\");\n          option.value = i;\n          option.text = i;\n          yearDropdown.appendChild(option);\n      }\n      if(selectedYear) {\n        yearDropdown.value = selectedYear;\n      } else {\n        yearDropdown.value = currYear;\n      }\n  };\n\n  return function (fp) {\n      fp.yearSelectContainer = fp._createElement(\n          \"div\",\n          \"flatpickr-year-select \" + config.theme + \"Theme\",\n          config.text\n      );\n\n      fp.yearSelectContainer.tabIndex = -1;\n      createSelectElement(selectedYear);\n      yearDropdown.addEventListener('change', function (evt) {\n          var year = +evt.target.options[evt.target.selectedIndex].value;\n          fp.changeYear(year);\n      });\n\n      fp.yearSelectContainer.append(yearDropdown);\n\n      return {\n          onReady: function onReady() {\n              var name = fp.monthNav.className;               \n              const yearInputCollection = fp.calendarContainer.getElementsByClassName(name);\n              const el = yearInputCollection[0];\n              el.parentNode.insertBefore(fp.yearSelectContainer, el.parentNode.firstChild);\n          }\n      };\n  };\n}\n\nfunction calendar() {\n  let $calendar = $('.js-calendar__input');\n  $calendar.each(function() {\n    let $this = $(this),\n        $parent = $this.parents('.js-calendar'),\n        mode = $this.attr('data-mode'),\n        mvalue = mode?mode:'range';\n\n    let mind = new Date(), maxd = new Date();\n    mind.setFullYear(mind.getFullYear() - 10);\n    maxd.setFullYear(maxd.getFullYear() + 0);\n\n    flatpickr($this, {\n      \"locale\": \"ru\",\n      disableMobile: \"true\",\n      maxDate: 'today',\n      minDate: mind,\n      dateFormat: \"d.m.Y\",\n      position: 'auto',\n      mode: mvalue,\n      nextArrow: '<svg width=\"10\" height=\"17\" viewBox=\"0 0 10 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1.97652 0.325817C1.76125 0.114994 1.48728 0 1.16438 0C0.518591 0 0 0.49831 0 1.13078C0 1.44701 0.136987 1.7345 0.362036 1.9549L7.21135 8.50958L0.362036 15.0451C0.136987 15.2655 0 15.5626 0 15.8692C0 16.5017 0.518591 17 1.16438 17C1.48728 17 1.76125 16.885 1.97652 16.6742L9.58904 9.39121C9.86301 9.14205 9.99022 8.8354 10 8.5C10 8.1646 9.86301 7.87711 9.58904 7.61838L1.97652 0.325817Z\" fill=\"currentColor\"/></svg>',\n      prevArrow: '<svg width=\"10\" height=\"17\" viewBox=\"0 0 10 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M8.02348 16.6742C8.23875 16.885 8.51272 17 8.83562 17C9.48141 17 10 16.5017 10 15.8692C10 15.553 9.86301 15.2655 9.63796 15.0451L2.78865 8.49042L9.63796 1.9549C9.86301 1.7345 10 1.43743 10 1.13078C10 0.498309 9.48141 0 8.83562 0C8.51272 0 8.23875 0.114994 8.02348 0.325817L0.410959 7.60879C0.136986 7.85795 0.00978474 8.1646 0 8.5C0 8.8354 0.136986 9.12289 0.410959 9.38162L8.02348 16.6742Z\" fill=\"currentColor\"/></svg>',\n      plugins: [\n        new yearDropdownPlugin({\n          date: this.value,\n          yearStart: Math.abs(mind.getFullYear() - new Date().getFullYear()),\n          yearEnd: Math.abs(maxd.getFullYear() - new Date().getFullYear())\n        })\n      ],\n      onOpen: function() {\n        $parent.addClass('active');\n      },\n      onClose: function() {\n        $parent.removeClass('active');\n      },\n      onYearChange: function(selectedDates, dateStr, instance) {\n        let $year = instance.calendarContainer.querySelector('.flatpickr-year-select select');\n        $year.value = instance.currentYear;\n      }\n    });\n  })\n}"],"file":"../calendar.js"}